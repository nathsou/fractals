import{n as e,t as n}from"./vendor.080e648e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?n.credentials="include":"anonymous"===e.crossorigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const t={},r={zero:()=>r.of(0,0),one:()=>r.of(1,0),i:()=>r.of(0,1),NaN:()=>r.of(NaN,NaN),isNaN:([e,n])=>Number.isNaN(e)||Number.isNaN(n),isReal:([e,n])=>0===n,isImaginary:([e,n])=>0===e&&0!==n,of:(e,n)=>[e,n],add:([e,n],[t,r])=>[e+t,n+r],sub:([e,n],[t,r])=>[e-t,n-r],times:([e,n],t)=>[e*t,n*t],mult:([e,n],[t,r])=>[e*t-n*r,e*r+t*n],div:([e,n],[t,c])=>{const o=t*t+c*c;return 0===o?r.NaN():[(e*t+n*c)/o,(n*t-e*c)/o]},powScalar:(e,n)=>{const t=Math.pow(r.abs(e),n),c=n*r.arg(e);return[t*Math.cos(c),t*Math.sin(c)]},pow:(e,[n,t])=>{const c=r.abs(e),o=r.arg(e),a=t*Math.log(c)+n*o,s=c**n*Math.exp(-t*o);return[s*Math.cos(a),s*Math.sin(a)]},abs:([e,n])=>Math.sqrt(e*e+n*n),arg:([e,n])=>Math.atan2(n,e),conj:([e,n])=>[e,-n],dist:(e,n)=>r.abs(r.sub(e,n)),ln:e=>[Math.log(r.abs(e)),r.arg(e)],sin:e=>{const{add:n,sub:t,mult:c,div:o}=r,a=c(e,e),s=c(e,a),i=c(s,a),l=c(i,a),p=c(l,a),u=c(p,a),d=c(u,a),f=c(d,a),v=o(s,[6,0]),h=o(i,[120,0]),m=o(l,[5040,0]),_=o(p,[362880,0]),x=o(u,[39916800,0]),z=o(d,[6227020800,0]),y=o(f,[1307674368e3,0]);return t(n(t(n(t(n(t(e,v),h),m),_),x),z),y)},cos:e=>{const{add:n,sub:t,mult:c,div:o}=r,a=c(e,e),s=c(a,a),i=c(s,a),l=c(i,a),p=c(l,a),u=c(p,a),d=c(u,a),f=o(a,[2,0]),v=o(s,[24,0]),h=o(i,[720,0]),m=o(l,[40320,0]),_=o(p,[3628800,0]),x=o(u,[479001600,0]),z=o(d,[87178291200,0]);return t(n(t(n(t(n(t(e,f),v),h),m),_),x),z)},exp:([e,n])=>r.times([Math.cos(n),Math.sin(n)],Math.exp(e))},{abs:c,div:o,sub:a,add:s,times:i}=r,l=(e,n,t=(n=>((e,n,t=r.of(10**-4,0))=>o(a(e(s(n,t)),e(a(n,t))),i(t,2)))(e,n)),l=1e-12,p=40)=>{let u=n;const d=[];for(let r=0;r<p;r++){const n=o(e(u),t(u));if(u=a(u,n),d.push(u),c(n)<l)return d}return[]},p=["z^3 - 1","(z - 1)^2 - 1","z^3 - 2 * z + 3","z^4 - 1","z^z - 2","log(z)","z^log(z + i) - 1","sin(z) * cos(z)","exp(z) - z^5"],u=e=>{switch(e.type){case"VARIABLE_OR_LITERAL":switch(e.value){case"z":return{type:"literal",name:"z"};case"i":return{type:"complex",a:{type:"real",x:0},b:{type:"real",x:1}};case"e":return{type:"complex",a:{type:"real",x:Math.E},b:{type:"real",x:0}};case"pi":return{type:"complex",a:{type:"real",x:Math.PI},b:{type:"real",x:0}};case"tau":return{type:"complex",a:{type:"real",x:2*Math.PI},b:{type:"real",x:0}};case"phi":return{type:"complex",a:{type:"real",x:(1+Math.sqrt(5))/2},b:{type:"real",x:0}};default:{const n=Number(e.value);return Number.isNaN(n)?{type:"error",message:`unknown variable '${e.value}'`}:{type:"complex",a:{type:"real",x:n},b:{type:"real",x:0}}}}case"OPERATOR":switch(e.value){case"+":{const n=u(e.left),t=u(e.right);return"complex"===n.type&&"complex"===t.type?{type:"complex",a:{type:"binary_op",op:"+",lhs:n.a,rhs:t.a},b:{type:"binary_op",op:"+",lhs:n.b,rhs:t.b}}:{type:"binary_op",op:"+",lhs:n,rhs:t}}case"-":{if(void 0===e.right)return{type:"unary_op",op:"-",arg:u(e.left)};const n=u(e.left),t=u(e.right);return"complex"===n.type&&"complex"===t.type?{type:"complex",a:{type:"binary_op",op:"-",lhs:n.a,rhs:t.a},b:{type:"binary_op",op:"-",lhs:n.b,rhs:t.b}}:{type:"binary_op",op:"-",lhs:n,rhs:t}}case"*":const n=u(e.left),t=u(e.right),r="complex"===n.type&&"real"===n.b.type&&0===n.b.x,c="complex"===t.type&&"real"===t.b.type&&0===t.b.x;return!r&&c?{type:"binary_op",op:"*x",lhs:n,rhs:t}:r&&!c?{type:"binary_op",op:"*x",lhs:t,rhs:n}:r&&c?{type:"binary_op",op:"x*y",lhs:n,rhs:t}:{type:"binary_op",op:"*",lhs:n,rhs:t};case"/":return{type:"binary_op",op:"/",lhs:u(e.left),rhs:u(e.right)};case"^":{const n=u(e.left),t=u(e.right);if("complex"===n.type&&"real"===n.a.type&&n.a.x===Math.E&&"real"===n.b.type&&0===n.b.x)return{type:"func",value:"exp",arg:t};return{type:"binary_op",op:"complex"===t.type&&"real"===t.b.type&&0===t.b.x?"^x":"^",lhs:n,rhs:t}}}case"FUNCTION":return{type:"func",value:e.value,arg:u(e.right)}}},d=n=>u(e.tree(n)),f=(e,n)=>{switch(e.type){case"literal":switch(e.name){case"z":return n}break;case"real":return[e.x,0];case"unary_op":switch(e.op){case"-":return r.times(f(e.arg,n),-1)}case"binary_op":const t=f(e.lhs,n),c=f(e.rhs,n);switch(e.op){case"+":return r.add(t,c);case"-":return r.sub(t,c);case"*":return r.mult(t,c);case"*x":return r.times(t,c[0]);case"x*y":return[t[0]*c[0],0];case"/":return r.div(t,c);case"^":return r.pow(t,c);case"^x":return r.powScalar(t,c[0])}case"func":const o=f(e.arg,n);switch(e.value){case"log":return r.ln(o);case"sin":return r.sin(o);case"cos":return r.cos(o);case"sqrt":return r.powScalar(o,.5);case"exp":return r.exp(o)}case"complex":const[a]=f(e.a,n),[,s]=f(e.b,n);return[a,s]}throw Error(`invalid expression: ${JSON.stringify(e,null,2)}`)},v=e=>{const n=e=>{const n=/vec2\((\d*\.\d+), (\d*\.\d+)\)/.exec(e);return null!==n?n[1]:`${e}.x`};switch(e.type){case"literal":return e.name;case"unary_op":switch(e.op){case"-":return`(-1.0 * ${v(e.arg)})`}case"binary_op":{const t=v(e.lhs),r=v(e.rhs);switch(e.op){case"+":return`${t} + ${r}`;case"-":return`${t} - ${r}`;case"*":return`cplx_mult(${t}, ${r})`;case"*x":return`${t} * ${n(r)}`;case"x*y":return`${n(t)} * ${n(r)}`;case"/":return`cplx_div(${t}, ${r})`;case"^":return`cplx_pow(${t}, ${r})`;case"^x":return`cplx_pow_scalar(${t}, ${n(r)})`}}case"func":{const n=v(e.arg);switch(e.value){case"log":return`cplx_ln(${n})`;case"sin":return`cplx_sin(${n})`;case"cos":return`cplx_cos(${n})`;case"sqrt":return`cplx_pow_scalar(${n}, 0.5)`;case"exp":return`cplx_exp(${n})`}}case"real":{const n=Number(e.x);return Number.isInteger(n)?`${n}.0`:`${n}`}case"complex":return`vec2(${v(e.a)}, ${v(e.b)})`;case"error":throw e}},h=e=>n=>f(e,n),m=(e,n,t)=>t.replaceAll(e,`(${n})`),_=n=>{const t=d(n);return{f:e=>m("z",e,v(t)),native:h(t),diff:t=>r=>m("z",r,v(d(`${e.diff(n,"z",t)}`)))}},x=["newton","halley","secant","steffensen"],z={newton:(e,n)=>`\n    vec3 ${e}(vec2 z0, float eps) {\n      vec2 z = z0;\n      float n = 0.0;\n\n      for (int j = 0; j < MAX_ITERS; j++) {\n        vec2 delta = cplx_div(${n.function.f("z")}, ${n.function.diff(1)("z")});\n        z -= delta;\n        n++;\n\n        if (length(delta) <= eps) {\n          break;\n        }\n      }\n\n      return vec3(z, n);\n    }\n  `,halley:(e,n)=>`\n    vec3 ${e}(vec2 z0, float eps) {\n      vec2 z = z0;\n      float n = 0.0;\n\n      for (int j = 0; j < MAX_ITERS; j++) {\n        vec2 f_z = ${n.function.f("z")};\n        vec2 f_prime_z = ${n.function.diff(1)("z")};\n        vec2 f_prime_prime_z = ${n.function.diff(2)("z")};\n        vec2 top = 2.0 * cplx_mult(f_z, f_prime_z);\n        vec2 bot = 2.0 * cplx_mult(f_prime_z, f_prime_z) - cplx_mult(f_z, f_prime_prime_z);\n        vec2 delta = cplx_div(top, bot);\n        z -= delta;\n        n++;\n\n        if (length(delta) <= eps) {\n          break;\n        }\n      }\n\n      return vec3(z, n);\n    }\n  `,secant:(e,n)=>`\n    vec3 ${e}(vec2 z0, float eps) {\n      // run one newton method step to get a second approximation needed for the secant method\n      vec2 z1 = z0 - cplx_div(${n.function.f("z0")}, ${n.function.diff(1)("z0")});\n      vec2 z_n_minus_2 = z0;\n      vec2 z_n_minus_1 = z1;\n      float n = 0.0;\n\n      for (int j = 0; j < MAX_ITERS; j++) {\n        vec2 top = z_n_minus_1 - z_n_minus_2;\n        vec2 f_z_n_minus_1 = ${n.function.f("z_n_minus_1")};\n        vec2 bot = f_z_n_minus_1 - ${n.function.f("z_n_minus_2")};\n        vec2 delta = cplx_mult(f_z_n_minus_1, cplx_div(top, bot));\n        z_n_minus_2 = z_n_minus_1;\n        z_n_minus_1 -= delta;\n        n++;\n\n        if (length(delta) <= eps) {\n          break;\n        }\n      }\n\n      return vec3(z_n_minus_1, n);\n    }`,steffensen:(e,n)=>`\n    vec3 ${e}(vec2 z0, float eps) {\n      vec2 z = z0;\n      float n = 0.0;\n\n      for (int j = 0; j < MAX_ITERS; j++) {\n        vec2 f_z = ${n.function.f("z")};\n        vec2 g_z = cplx_div(${n.function.f("z + f_z")}, f_z) - vec2(1.0, 0.0);\n        vec2 delta = cplx_div(f_z, g_z);\n        z -= delta;\n        n++;\n\n        if (length(delta) <= eps) {\n          break;\n        }\n      }\n\n      return vec3(z, n);\n    }\n  `},y=(e,n)=>{const t=e.getContext("webgl",{preserveDrawingBuffer:!0});if(null===t)throw new Error("could not get webgl context");const r=e=>{const n=t.createShader(t.VERTEX_SHADER);if(null===n)throw new Error("vertShader is null");const{vertex:r,fragment:c}=(e=>({vertex:"        \n    precision highp float;\n\n    attribute vec2 a_pos;\n    uniform vec2 u_res;\n    uniform float u_zoom;\n    uniform vec2 u_center;\n    varying vec2 v_pos;\n    \n    void main() {\n      gl_Position = vec4(a_pos, 0, 1);\n      v_pos = (1.0 / u_zoom) * a_pos + u_center;\n      v_pos.x *= u_res.x / u_res.y;\n    }\n  ",fragment:`\n    precision highp float;\n\n    #define MAX_ITERS ${e.maxIterations}\n    #define ETA ${e.convergencePrecision}\n\n    varying vec2 v_pos;\n\n    vec2 cplx_mult(vec2 a, vec2 b) {\n      return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n    }\n\n    vec2 cplx_div(vec2 a, vec2 b) {\n      float d = b.x * b.x + b.y * b.y;\n\n      return vec2(\n        (a.x * b.x + a.y * b.y) / d,\n        (a.y * b.x - a.x * b.y) / d\n      );\n    }\n\n    float cplx_arg(vec2 z) {\n      return atan(z.y, z.x);\n    }\n\n    vec2 cplx_pow_scalar(vec2 z, float p) {\n      float c_p = pow(length(z), p);\n      float angle = p * cplx_arg(z);\n      return vec2(c_p * cos(angle), c_p * sin(angle));\n    }\n\n    vec2 cplx_ln(vec2 z) {\n      return vec2(log(length(z)), cplx_arg(z));\n    }\n\n    vec2 cplx_pow(vec2 z, vec2 w) {\n      float p = length(z);\n      float theta = cplx_arg(z);\n      float c = w.x;\n      float d = w.y;\n      float v = d * log(p) + c * theta;\n\n      return pow(p, c) * exp(-d * theta) * vec2(cos(v), sin(v));\n    }\n\n    vec2 cplx_sin(vec2 z) {\n      vec2 z2 = cplx_mult(z, z);\n      vec2 z3 = cplx_mult(z, z2);\n      vec2 z5 = cplx_mult(z3, z2);\n      vec2 z7 = cplx_mult(z5, z2);\n      vec2 z9 = cplx_mult(z7, z2);\n      vec2 z11 = cplx_mult(z9, z2);\n      vec2 z13 = cplx_mult(z11, z2);\n      vec2 z15 = cplx_mult(z13, z2);\n\n      vec2 t2 = cplx_div(z3, vec2(6.0, 0.0));\n      vec2 t3 = cplx_div(z5, vec2(120.0, 0.0));\n      vec2 t4 = cplx_div(z7, vec2(5040.0, 0.0));\n      vec2 t5 = cplx_div(z9, vec2(362880.0, 0.0));\n      vec2 t6 = cplx_div(z11, vec2(39916800.0, 0.0));\n      vec2 t7 = cplx_div(z13, vec2(6227020800.0, 0.0));\n      vec2 t8 = cplx_div(z15, vec2(1307674368000.0, 0.0));\n\n      return z - t2 + t3 - t4 + t5 - t6 + t7 - t8;\n    }\n\n    vec2 cplx_cos(vec2 z) {\n      vec2 z2 = cplx_mult(z, z);\n      vec2 z4 = cplx_mult(z2, z2);\n      vec2 z6 = cplx_mult(z4, z2);\n      vec2 z8 = cplx_mult(z6, z2);\n      vec2 z10 = cplx_mult(z8, z2);\n      vec2 z12 = cplx_mult(z10, z2);\n      vec2 z14 = cplx_mult(z12, z2);\n\n      vec2 t2 = cplx_div(z2, vec2(2.0, 0.0));\n      vec2 t3 = cplx_div(z4, vec2(24.0, 0.0));\n      vec2 t4 = cplx_div(z6, vec2(720.0, 0.0));\n      vec2 t5 = cplx_div(z8, vec2(40320.0, 0.0));\n      vec2 t6 = cplx_div(z10, vec2(3628800.0, 0.0));\n      vec2 t7 = cplx_div(z12, vec2(479001600.0, 0.0));\n      vec2 t8 = cplx_div(z14, vec2(87178291200.0, 0.0));\n\n      return z - t2 + t3 - t4 + t5 - t6 + t7 - t8;\n    }\n\n    vec2 cplx_exp(vec2 z) {\n      return exp(z.x) * vec2(cos(z.y), sin(z.y));\n    }\n\n    ${z[e.method]("find_root",e)}\n\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    vec3 root_color(vec2 z, float n) {\n      float p = float(${e.brightnessFactor}); // color brightness factor\n      float m = 1.0 - (exp(p * n / float(MAX_ITERS)) - 1.0) / (exp(p) - 1.0);\n      float hue = cplx_arg(z) / 6.2831853 + float(${e.colorShift});\n\n      return hsv2rgb(vec3(hue, 1.0, m));\n    }\n\n    void main() {\n      vec3 color = vec3(0.0);\n      vec3 r = find_root(v_pos, ETA);\n\n      if (r.z > 0.0) {\n        float m = r.z / float(MAX_ITERS);\n        color = mix(root_color(vec2(r.x, r.y), r.z), vec3(0.0), m);\n      }\n  \n      gl_FragColor = vec4(color, 1.0);\n    }\n  `}))(e);t.shaderSource(n,r),t.compileShader(n);const o=t.createShader(t.FRAGMENT_SHADER);if(null===o)throw new Error("fragShader is null");t.shaderSource(o,c),t.compileShader(o);const a=t.createProgram();if(null===a)throw new Error("prog is null");return t.attachShader(a,n),t.attachShader(a,o),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||console.error(t.getProgramInfoLog(a)),a};let c=r(n);return{render:(n,r)=>{t.useProgram(c);const o=t.getUniformLocation(c,"u_res");t.uniform2f(o,e.width,e.height);const a=t.getUniformLocation(c,"u_zoom");t.uniform1f(a,n);const s=t.getUniformLocation(c,"u_center");t.uniform2f(s,r.x,r.y),t.viewport(0,0,e.width,e.height);const i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW);const l=t.getAttribLocation(c,"a_pos");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6)},updateParams:e=>{c=r(e)}}},g=()=>{const e=new Map;let n=0,t=1;const r=[];return{addPinchListener:e=>{r.push(e)},onPointerDown:n=>{e.set(n.pointerId,n)},onPointerUp:t=>{n=0,(n=>{e.delete(n.pointerId)})(t)},onPointerMove:c=>{if(e.set(c.pointerId,c),2===e.size){const[c,o]=[...e.values()],a=Math.sqrt((o.clientX-c.clientX)**2+(o.clientY-c.clientY)**2);0===n&&(n=a);const s=t*(a/n),i=(o.clientX+c.clientX)/2,l=(o.clientY+c.clientY)/2;for(const e of r)e(i,l,s);n=a,t=s}},isZooming:()=>2===e.size}},b=(e,n,t,r,c)=>(e-n)*(c-r)/(t-n)+r,w=(e,n,t,c,o,a=!1,s)=>{const i=e.getContext("2d");if(null!==i){if(i.clearRect(0,0,e.width,e.height),r.isNaN(c)||"newton"!==o)return;if(!a){i.lineWidth=2,i.strokeStyle="white",i.beginPath();const[e,r]=n(c);i.moveTo(e,r);for(const[o,a]of l(t,c,s).map(n))i.lineTo(o,a);i.stroke()}}},$=(e,n,t,c=1)=>{const o=document.querySelector("#cnv"),a=document.querySelector("#overlay");o.width=e,o.height=n,a.width=e,a.height=n;let s=!1;const i={offset:{x:0,y:0},scale:c},l=(e,n,t=i.scale)=>[e/t+i.offset.x,n/t+i.offset.y],p=()=>{const e=1/i.scale,n=e*o.width/o.height,[t,r]=[-n+i.offset.x,n+i.offset.x],[c,a]=[e+i.offset.y,-e+i.offset.y];return{d1:t,d2:r,d3:c,d4:a}},u=([e,n])=>{console.log("offset: ",i.offset);const{d1:t,d2:r,d3:c,d4:a}=p();return[b(e,t,r,0,o.width),b(n,c,a,0,o.height)]},d={value:r.NaN(),clickTimestamp:0},f=g(),v=()=>{s=!1,d.value=r.NaN(),a.style.cursor="auto"},h=y(o,t);let m=0;const _=()=>{const e=Date.now();e-m>=8.333333333333334&&(m=e,h.render(i.scale,i.offset),w(a,u,t.function.native,d.value,t.method,!0))},x=(t,r,c)=>{const[o,a]=((e,n,t,r)=>{const[c,o]=l(e,n,t),[a,s]=l(e,n,r);return[c-a,o-s]})(2*(t/e-.5),2*(-r/n+.5),i.scale,c);i.scale=c,i.offset.x+=o,i.offset.y+=a,_()};return a.addEventListener("pointerdown",(e=>{e.preventDefault(),s=!0,d.value=(([e,n])=>{const{d1:t,d2:r,d3:c,d4:a}=p();return[b(e,0,o.width,t,r),b(n,0,o.height,c,a)]})([e.clientX,e.clientY]),d.clickTimestamp=Date.now(),a.style.cursor="grab",f.onPointerDown(e)})),a.addEventListener("pointerup",(e=>{e.preventDefault(),Date.now()-d.clickTimestamp<100&&w(a,u,t.function.native,d.value,t.method),v(),f.onPointerUp(e)})),a.addEventListener("pointercancel",v),a.addEventListener("wheel",(e=>{e.preventDefault();const n=i.scale*(e.deltaY<0?1.1:.9);x(e.clientX,e.clientY,n)})),a.addEventListener("pointermove",(t=>{if(t.preventDefault(),f.isZooming())f.onPointerMove(t);else if(s){const r="touch"===t.pointerType?.5:1;((e,n)=>{i.offset.x=e,i.offset.y=n})(i.offset.x-r*t.movementX/(e*i.scale*.5),i.offset.y+r*t.movementY/(n*i.scale*.5)),_()}})),window.addEventListener("resize",(()=>{e=o.clientWidth,n=o.clientHeight,o.width=e,o.height=n,a.width=e,a.height=n,_()})),f.addPinchListener(x),_(),{updateParams:e=>{h.updateParams(e),t=e,_()}}};(async()=>{var e,r;await(e=()=>import("./Calculus.75988da5.js").then((function(e){return e.C})),r=["assets/Calculus.75988da5.js","assets/vendor.080e648e.js"],r&&0!==r.length?Promise.all(r.map((e=>{if((e=`/fractals/${e}`)in t)return;t[e]=!0;const n=e.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const c=document.createElement("link");return c.rel=n?"stylesheet":"modulepreload",n||(c.as="script",c.crossOrigin=""),c.href=e,document.head.appendChild(c),n?new Promise(((e,n)=>{c.addEventListener("load",e),c.addEventListener("error",n)})):void 0}))).then((()=>e())):e());const c=(()=>{const e={"f(z)":p[0],"custom function":"z^2 - 1",method:"newton","color shift":1.6,"max iterations":50,"convergence threshold":.001,"brightness factor":4,error:""},t=new n.exports.Pane({container:document.querySelector("#pane"),title:"parameters"});t.addInput(e,"f(z)",{options:p.reduce(((e,n)=>(e[n]=n,e)),{custom:"custom"})});const r=t.addInput(e,"custom function",{disabled:!0}),c=t.addMonitor(e,"error",{multiline:!0,lineCount:2,hidden:!0}),o=n=>{var t;let r=_("0");try{r=_("custom"===n["f(z)"]?n["custom function"]:n["f(z)"]),c.hidden=!0}catch(o){e.error=null!=(t=null==o?void 0:o.message)?t:"invalid expression",c.hidden=!1}return{function:r,method:n.method,colorShift:n["color shift"],maxIterations:n["max iterations"],convergencePrecision:n["convergence threshold"],brightnessFactor:-n["brightness factor"]}};return t.addInput(e,"method",{options:x.reduce(((e,n)=>(e[n]=n,e)),{})}),t.addInput(e,"color shift",{min:0,max:Math.PI}),t.add,t.addInput(e,"brightness factor",{min:.01,max:12}),t.addInput(e,"max iterations",{min:1,max:400,step:1}),t.addInput(e,"convergence threshold",{min:1e-4,max:.999}),t.addButton({title:"save image"}).on("click",(()=>{const e=document.querySelector("#download-link"),n=document.querySelector("#cnv");e.href=n.toDataURL("image/png"),console.log(e.href),e.click()})),{params:()=>o(e),onChange:n=>{t.on("change",(()=>{r.disabled="custom"!==e["f(z)"],n(o(e))}))}}})(),o=$(window.innerWidth,window.innerHeight,c.params(),1);c.onChange(o.updateParams)})();
